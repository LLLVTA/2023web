<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>function</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- <link rel="stylesheet" href="./css/matrix-style.css"> -->
    <link rel="stylesheet" href="./css/style.css" />
    <script src="./index.js"></script>

    <!-- 新 Bootstrap5 核心 CSS 文件 -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/css/bootstrap.min.css"
        integrity="sha384-r4NyP46KrjDleawBgD5tp8Y7UzmLA05oM1iAEQ17CSuDqnUK2+k9luXQOfXJCJ4I" crossorigin="anonymous">
    <!-- <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.0.0/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous"> -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.css">

    <!-- 上传文件 -->
    <link rel="stylesheet" href="./src/css/layui.css">

    <style>
        .sidebar {
            position: fixed;
            top: 0;
            bottom: 0;
            left: 0;
            z-index: 100;
            padding: 80px 0 0;
            box-shadow: inset -1px 0 0 rgba(0, 0, 0, .1);
            z-index: 99;
        }

        @media (max-width: 767.98px) {
            .sidebar {
                top: 11.5rem;
                padding: 0;
            }
        }

        .navbar {
            box-shadow: inset 0 -1px 0 rgba(0, 0, 0, .1);
        }

        @media (min-width: 767.98px) {
            .navbar {
                top: 0;
                position: sticky;
                z-index: 999;
            }
        }

        .sidebar .nav-link {
            color: black;
            padding: 1.5rem 1rem;
            text-align: center;
        }

        .sidebar .nav-link:hover {
            color: white;
            background-color: black;
        }

        .ml-2 {
            font-size: 20px;

        }
    </style>
</head>

<body style="overflow-x:hidden">
    <!-- 网页头部 -->
    <header style="background-color: black;">
        <a href="index.html" style="text-decoration: none;">
            <div class="logo">
                爱若卫士
            </div>
        </a>
    </header>
    <div class="container-fluid">
        <div class="row">
            <nav id="sidebar" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
                <div class="position-sticky">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <div class="algorithm">
                                <a class="nav-link" href="#">
                                    <span class="ml-2">算法1</span>
                                </a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <div class="algorithm">
                                <a class="nav-link" href="#">
                                    <span class="ml-2">算法2</span>
                                </a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <div class="algorithm">
                                <a class="nav-link" href="#">
                                    <span class="ml-2">算法3</span>
                                </a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <div class="algorithm">
                                <a class="nav-link" href="#">
                                    <span class="ml-2">算法4</span>
                                </a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <div class="algorithm">
                                <a class="nav-link" href="#">
                                    <span class="ml-2">算法5</span>
                                </a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <div class="algorithm">
                                <a class="nav-link" href="#">
                                    <span class="ml-2">算法6</span>
                                </a>
                            </div>
                        </li>
                    </ul>
                </div>
            </nav>
            <div class="col-md-9 ml-sm-auto col-lg-10 px-md-4 py-4">
                <h1 class="h2">Step1 上传文件</h1>
                <br>
                <div class="layui-upload">
                    <button type="button" class="layui-btn layui-btn-normal" id="testList">选择csv文件</button>
                    <div class="layui-upload-list">
                        <table class="layui-table">
                            <thead>
                                <th>文件名</th>
                                <th>大小</th>
                                <th>上传进度</th>
                                <th>操作</th>
                            </thead>
                            <tbody id="demoList"></tbody>
                        </table>
                    </div>
                    <button type="button" class="layui-btn" id="testListAction">开始上传</button>
                </div>

                <br><br><br>

                <h1 class="h2">Step2 输入参数</h1>
                <br>
                <div class="_parameter">
                    <div class="input-group mb-3">
                        <span class="input-group-text">参数1</span>
                        <input type="text" class="form-control">
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text">参数2</span>
                        <input type="text" class="form-control">
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text">参数3</span>
                        <input type="text" class="form-control">
                    </div>
                </div>

                <div class="_parameter" style="display: none;">
                    <div class="input-group mb-3">
                        <span class="input-group-text">参数1</span>
                        <input type="text" class="form-control">
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text">参数2.</span>
                        <input type="text" class="form-control">
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text">参数3.</span>
                        <input type="text" class="form-control">
                    </div>
                </div>

                <div class="_parameter" style="display: none;">
                    <div class="input-group mb-3">
                        <span class="input-group-text">参数1.</span>
                        <input type="text" class="form-control">
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text">参数2.</span>
                        <input type="text" class="form-control">
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text">参数3</span>
                        <input type="text" class="form-control">
                    </div>
                </div>

                <div class="_parameter" style="display: none;">
                    <div class="input-group mb-3">
                        <span class="input-group-text">参数1.</span>
                        <input type="text" class="form-control">
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text">参数2.</span>
                        <input type="text" class="form-control">
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text">参数3.</span>
                        <input type="text" class="form-control">
                    </div>
                </div>

                <div class="_parameter" style="display: none;">
                    <div class="input-group mb-3">
                        <span class="input-group-text">参数1/</span>
                        <input type="text" class="form-control">
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text">参数2/</span>
                        <input type="text" class="form-control">
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text">参数3</span>
                        <input type="text" class="form-control">
                    </div>
                </div>

                <div class="_parameter" style="display: none;">
                    <div class="input-group mb-3">
                        <span class="input-group-text">参数1/</span>
                        <input type="text" class="form-control">
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text">参数2</span>
                        <input type="text" class="form-control">
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text">参数3</span>
                        <input type="text" class="form-control">
                    </div>
                </div>

                <br><br><br>
                <h1 class="h2">Step3 查看结果</h1>
                <br>

                <br><br><br>
            </div>
        </div>
    </div>
    <!-- 参数输入 -->
    <script>
        window.onload = function () {
            var algorithms = document.getElementsByClassName('algorithm');
            var _parameters = document.getElementsByClassName('_parameter');
            algorithms[0].addEventListener('click', function () {
                for (var j = 0; j < algorithms.length; j++) {
                    _parameters[j].style.display = 'none';
                }
                _parameters[0].style.display = 'block';
            })
            algorithms[1].addEventListener('click', function () {
                for (var j = 0; j < algorithms.length; j++) {
                    _parameters[j].style.display = 'none';
                }
                _parameters[1].style.display = 'block';
            })
            algorithms[2].addEventListener('click', function () {
                for (var j = 0; j < algorithms.length; j++) {
                    _parameters[j].style.display = 'none';
                }
                _parameters[2].style.display = 'block';
            })
            algorithms[3].addEventListener('click', function () {
                for (var j = 0; j < algorithms.length; j++) {
                    _parameters[j].style.display = 'none';
                }
                _parameters[3].style.display = 'block';
            })
            algorithms[4].addEventListener('click', function () {
                for (var j = 0; j < algorithms.length; j++) {
                    _parameters[j].style.display = 'none';
                }
                _parameters[4].style.display = 'block';
            })
            algorithms[5].addEventListener('click', function () {
                for (var j = 0; j < algorithms.length; j++) {
                    _parameters[j].style.display = 'none';
                }
                _parameters[5].style.display = 'block';
            })
        }
    </script>
    <!-- 上传文件 -->
    <script src="./src/layui.js" src1="https://cdn.staticfile.org/layui/2.6.8/layui.js"></script>
    <script>
        layui.use(['upload', 'element'], function () {
            var $ = layui.$;
            var upload = layui.upload;
            var element = layui.element;

            // 演示多文件列表 ---  本示例仅演示未开启 unified 属性的情况
            var demoListView = $('#demoList');
            var uploadListIns = upload.render({
                elem: '#testList',
                url: 'https://httpbin.org/post',
                accept: 'file',
                multiple: true,
                number: 3,
                auto: false,
                bindAction: '#testListAction',
                size: 500000,
                choose: function (obj) {
                    var files = this.files = obj.pushFile(); // 将每次选择的文件追加到文件队列
                    //读取本地文件
                    obj.preview(function (index, file, result) {
                        var tr = $(['<tr id="upload-' + index + '">'
                            , '<td>' + file.name + '</td>'
                            , '<td>' + (file.size / 1014).toFixed(1) + 'kb</td>'
                            , '<td><div class="layui-progress" lay-filter="progress-' + index + '"><div class="layui-progress-bar" lay-percent=""></div></div></td>'
                            , '<td>'
                            , '<button class="layui-btn layui-btn-xs demo-reload layui-hide">重传</button>'
                            , '<button class="layui-btn layui-btn-xs layui-btn-danger demo-delete">删除</button>'
                            , '</td>'
                            , '</tr>'].join(''));

                        //单个重传
                        tr.find('.demo-reload').on('click', function () {
                            obj.upload(index, file);
                        });

                        //删除
                        var that = this;
                        tr.find('.demo-delete').on('click', function () {
                            console.log(files, index);
                            delete files[index]; //删除对应的文件
                            tr.remove();
                            uploadListIns.config.elem.next()[0].value = ''; //清空 input file 值，以免删除后出现同名文件不可选
                        });

                        demoListView.append(tr);

                        element.render('progress');
                    });
                },
                done: function (res, index, upload) {
                    //if(res.code == 0){ //上传成功
                    var tr = demoListView.find('tr#upload-' + index)
                        , tds = tr.children();
                    tds.eq(3).html(''); //清空操作
                    delete this.files[index]; //删除文件队列已经上传成功的文件
                    return;
                    //}
                    this.error(index, upload);
                },
                allDone: function (obj) {
                    console.log(obj)
                },
                error: function (index, upload) {
                    var tr = demoListView.find('tr#upload-' + index)
                        , tds = tr.children();
                    tds.eq(3).find('.demo-reload').removeClass('layui-hide'); //显示重传
                },
                progress: function (n, elem, e, index) {
                    console.log(n);
                    console.log(index);
                    element.progress('progress-' + index, n + '%'); //进度条
                }
            });
        });
    </script>
</body>

</html>